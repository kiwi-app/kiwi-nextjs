{"version":3,"file":"index.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../../manifest.ts","../../../src/database/index.ts","../../../src/helpers/index.ts","../../../src/components/CatchAllLive.tsx","../../../src/components/CatchAllServer.tsx","../../../src/components/CatchAll.tsx","../../../src/routes/index.ts","../../../src/props/RichText.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n",null,null,null,null,null,null,null,null],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","manifest","url","client","KIWI_ADMIN_URL","process","env","NEXT_PUBLIC_ADMIN_URL","defaultLiveMessage","async","getLoaderProps","loaderRequest","props","sectionModule","schema","module","newProps","loaders","loadersProps","hasExportedLoader","property","component","properties","name","loaderReference","push","default","loader","Loader","loaderProps","loaderProperty","loadersResponses","Promise","all","i","length","propName","loaderResponse","getPageConfig","site","page","request","fetch","replace","json","err","mergeManifestSections","sections","internalManifest","sendSectionHoverEvent","iframeRef","data","postMessage","event","sectionHoverEvent","sendSectionClickEvent","sectionClickEvent","listenPageChanges","pageId","callback","NEXT_PUBLIC_KIWI_SUPABASE_URL","NEXT_PUBLIC_KIWI_SUPABASE_ANON_KEY","supabase","createClient","global","bind","globalThis","getSupabaseClient","channel","on","table","payload","new","id","subscribe","CatchAllLive","requestInfo","setPage","useState","liveEditing","setLiveEditing","selectedSectionId","setSelectedSectionId","hoveredSectionId","setHoveredSectionId","completeLoaders","setCompleteLoaders","useEffect","path","window","location","pathname","then","useSectionLoaders","newPage","isInsideIframe","self","top","e","addEventListener","onReceiveMessage","removeEventListener","idx","section","message","sectionId","React","className","map","Component","key","includes","onMouseLeave","parent","onMouseEnter","onClick","CatchAllServer","kiwi","KiwiCatchAll","live","params","mergedManifest","cookies","headers","getAll","forEach","value","_","join","corsHeaders","LiveRoute","PATCH","result","execSync","NextResponse","GET","POST","req","method","body","response","OPTIONS","RichTextComponent","text","dangerouslySetInnerHTML","__html"],"mappings":"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","x_google_ignoreList":[0]}