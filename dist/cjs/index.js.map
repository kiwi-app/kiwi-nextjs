{"version":3,"file":"index.js","sources":["../../../src/components/CatchAllServer.tsx","../../node_modules/style-inject/dist/style-inject.es.js","../../../manifest.ts","../../../src/database/index.ts","../../../src/helpers/index.ts","../../../src/components/CatchAllClient.tsx","../../../src/components/CatchAll.tsx","../../../src/routes/index.ts","../../../src/props/RichText.tsx"],"sourcesContent":[null,"function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n",null,null,null,null,null,null,null],"names":["CatchAllServer","page","manifest","React","createElement","className","sections","map","section","idx","id","type","sectionModule","Component","module","default","key","props","css","ref","insertAt","document","head","getElementsByTagName","style","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","url","client","KIWI_ADMIN_URL","process","env","NEXT_PUBLIC_ADMIN_URL","defaultLiveMessage","async","getLoaderProps","loaderRequest","schema","newProps","loaders","loadersProps","hasExportedLoader","property","component","properties","name","loaderReference","push","loader","Loader","loaderProps","loaderProperty","loadersResponses","Promise","all","i","length","propName","loaderResponse","mergeManifestSections","internalManifest","sendSectionHoverEvent","iframeRef","data","postMessage","event","sectionHoverEvent","sendSectionClickEvent","sectionClickEvent","listenPageChanges","pageId","callback","NEXT_PUBLIC_KIWI_SUPABASE_URL","NEXT_PUBLIC_KIWI_SUPABASE_ANON_KEY","supabase","createClient","global","fetch","bind","globalThis","getSupabaseClient","channel","on","table","payload","new","subscribe","CatchAllClient","initialPage","requestInfo","setPage","useState","liveEditing","setLiveEditing","selectedSectionId","setSelectedSectionId","hoveredSectionId","setHoveredSectionId","siteManifest","require","useEffect","isInsideIframe","window","self","top","e","addEventListener","onReceiveMessage","removeEventListener","newPage","useSectionLoaders","message","sectionId","includes","onMouseLeave","parent","onMouseEnter","onClick","KiwiCatchAll","ClientComponent","ServerComponent","params","kiwi","path","join","isLive","startsWith","mergedManifest","cookies","headers","getAll","forEach","value","_","site","request","replace","json","err","getPageConfig","corsHeaders","LiveRoute","PATCH","result","execSync","NextResponse","GET","POST","req","method","body","response","OPTIONS","RichTextComponent","text","dangerouslySetInnerHTML","__html"],"mappings":"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","x_google_ignoreList":[1]}