{"version":3,"file":"index.js","sources":["../../../src/components/CatchAllServer.tsx","../../node_modules/style-inject/dist/style-inject.es.js","../../../manifest.ts","../../../src/helpers/index.ts","../../../src/components/CatchAllClient.tsx","../../../src/components/CatchAll.tsx","../../../src/routes/index.ts","../../../src/props/RichText.tsx"],"sourcesContent":[null,"function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n",null,null,null,null,null,null],"names":["CatchAllServer","page","manifest","React","createElement","className","sections","map","section","idx","id","type","sectionModule","Component","module","default","key","props","css","ref","insertAt","document","head","getElementsByTagName","style","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","KIWI_ADMIN_URL","url","process","env","NEXT_PUBLIC_ADMIN_URL","defaultLiveMessage","async","getLoaderProps","loaderRequest","schema","newProps","loaders","loadersProps","hasExportedLoader","property","component","properties","name","loaderReference","push","loader","Loader","loaderProps","loaderProperty","loadersResponses","Promise","all","i","length","propName","loaderResponse","mergeManifest","internalManifest","sendSectionHoverEvent","iframeRef","data","postMessage","event","sectionHoverEvent","sendSectionClickEvent","sectionClickEvent","CatchAllClient","externalManifest","initialPage","requestInfo","eventSource","useRef","setPage","useState","liveEditing","setLiveEditing","selectedSectionId","setSelectedSectionId","hoveredSectionId","setHoveredSectionId","useEffect","isInsideIframe","window","self","top","e","addEventListener","onReceiveMessage","current","close","removeEventListener","console","error","EventSource","path","onmessage","processEvent","onerror","useSectionLoaders","message","sectionId","includes","onMouseLeave","parent","onMouseEnter","onClick","KiwiCatchAll","ClientComponent","ServerComponent","params","kiwi","join","isLive","startsWith","mergedManifest","cookies","headers","getAll","forEach","value","_","site","request","fetch","replace","json","err","getPageConfig","corsHeaders","LiveRoute","PATCH","result","execSync","NextResponse","GET","POST","req","method","body","response","OPTIONS","RichTextComponent","text","dangerouslySetInnerHTML","__html"],"mappings":"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","x_google_ignoreList":[1]}