{"version":3,"file":"index.js","sources":["../../../src/components/CatchAllServer.tsx","../../node_modules/style-inject/dist/style-inject.es.js","../../../manifest.ts","../../../src/database/index.ts","../../../src/helpers/index.ts","../../../src/components/CatchAllClient.tsx","../../../src/components/CatchAll.tsx","../../../src/routes/index.ts","../../../src/props/RichText.tsx"],"sourcesContent":[null,"function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n",null,null,null,null,null,null,null],"names":["CatchAllServer","page","manifest","React","createElement","className","sections","map","section","idx","id","type","sectionModule","Component","module","default","key","props","css","ref","insertAt","document","head","getElementsByTagName","style","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","url","client","KIWI_ADMIN_URL","process","env","NEXT_PUBLIC_ADMIN_URL","defaultLiveMessage","async","getLoaderProps","loaderRequest","schema","newProps","loaders","loadersProps","hasExportedLoader","property","component","properties","name","loaderReference","push","loader","Loader","loaderProps","loaderProperty","loadersResponses","Promise","all","i","length","propName","loaderResponse","mergeManifest","internalManifest","sendSectionHoverEvent","iframeRef","data","postMessage","event","sectionHoverEvent","sendSectionClickEvent","sectionClickEvent","listenPageChanges","pageId","callback","NEXT_PUBLIC_KIWI_SUPABASE_URL","NEXT_PUBLIC_KIWI_SUPABASE_ANON_KEY","supabase","createClient","global","fetch","bind","globalThis","getSupabaseClient","channel","on","table","payload","new","subscribe","CatchAllClient","externalManifest","initialPage","requestInfo","setPage","useState","liveEditing","setLiveEditing","selectedSectionId","setSelectedSectionId","hoveredSectionId","setHoveredSectionId","useEffect","isInsideIframe","window","self","top","e","addEventListener","onReceiveMessage","removeEventListener","newPage","useSectionLoaders","message","sectionId","includes","onMouseLeave","parent","onMouseEnter","onClick","KiwiCatchAll","ClientComponent","ServerComponent","params","kiwi","path","join","isLive","startsWith","mergedManifest","cookies","headers","getAll","forEach","value","_","site","request","replace","json","err","getPageConfig","corsHeaders","LiveRoute","PATCH","result","execSync","NextResponse","GET","POST","req","method","body","response","OPTIONS","RichTextComponent","text","dangerouslySetInnerHTML","__html"],"mappings":"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","x_google_ignoreList":[1]}